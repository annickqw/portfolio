---
import { getCollection } from "astro:content";

const projects = await getCollection("projects");
---

<!-- De rest van je HTML -->
<h1>Wi/Wi Studio</h1>

<h2>Projecten</h2>
<ul>
	{
		projects.map((project) => (
			<li>
				<h3>{project.data.title}</h3>
				<p>{project.data.description}</p>
				<img
					src={project.data.image}
					alt={project.data.title}
					width="300"
				/>
			</li>
		))
	}
</ul>

<!-- Voeg de widget toe met veilig JavaScript -->
<script type="module" is:inline>
	import netlifyIdentity from "https://cdn.jsdelivr.net/npm/netlify-identity-widget@1.9.2/+esm";

	document.addEventListener("DOMContentLoaded", () => {
		netlifyIdentity.init();
		netlifyIdentity.on("login", () => {
			document.location.href = "/admin/";
		});
	});
</script>
